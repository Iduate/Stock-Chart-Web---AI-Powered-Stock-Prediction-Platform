# Very simple Korean translation compiler script
# This script creates a clean PO file and compiles it to MO

# Add gettext tools to PATH
$env:Path += ";C:\Program Files\gettext-iconv\bin"

Write-Host "Starting Korean translation compilation..."

# Define paths
$tempDir = "C:\Temp"
$tempPoFile = "$tempDir\django_ko.po"
$moFile = "C:\Users\Hp\Desktop\단가행\Stock Chart Web\locale\ko\LC_MESSAGES\django.mo"

# Ensure temp directory exists
if (-not (Test-Path $tempDir)) {
    New-Item -ItemType Directory -Path $tempDir -Force | Out-Null
}

# Create clean PO file content - no duplicates and proper syntax
$poContent = @'
# Korean translations for Stock Chart Web
# Generated by Django

msgid ""
msgstr ""
"Content-Type: text/plain; charset=UTF-8\n"
"Language: ko\n"
"Project-Id-Version: Stock Chart Web\n"
"Report-Msgid-Bugs-To: \n"
"POT-Creation-Date: 2025-08-30 11:30+0000\n"
"PO-Revision-Date: 2025-08-30 11:30+0000\n"
"Last-Translator: Auto Generated\n"
"Language-Team: Korean\n"
"MIME-Version: 1.0\n"
"Content-Transfer-Encoding: 8bit\n"
"Plural-Forms: nplurals=1; plural=0;\n"

msgid "Stock Chart Web - Predict & Profit"
msgstr "주식 차트 웹 - 예측하고 수익을"

msgid "Home"
msgstr "홈"

msgid "Chart Board"
msgstr "차트 보드"

msgid "My Predictions"
msgstr "내 예측"

msgid "Charts"
msgstr "차트"

msgid "Predictions"
msgstr "예측"

msgid "Leaderboard"
msgstr "순위표"

msgid "Profile"
msgstr "프로필"

msgid "Login"
msgstr "로그인"

msgid "Register"
msgstr "회원가입"

msgid "Logout"
msgstr "로그아웃"

msgid "Email Address"
msgstr "이메일 주소"

msgid "Password"
msgstr "비밀번호"

msgid "Confirm Password"
msgstr "비밀번호 확인"

msgid "Remember Me"
msgstr "자동 로그인"

msgid "Forgot Password?"
msgstr "비밀번호를 잊으셨나요?"

msgid "Reset Password"
msgstr "비밀번호 재설정"

msgid "Create Account"
msgstr "계정 만들기"

msgid "Already have an account?"
msgstr "이미 계정이 있으신가요?"

msgid "My Dashboard"
msgstr "내 대시보드"

msgid "Prediction Accuracy"
msgstr "예측 정확도"

msgid "Total Earnings"
msgstr "총 수익"

msgid "Rewards Paid"
msgstr "지급된 보상"

msgid "Trending Markets"
msgstr "인기 마켓"

msgid "Recent Predictions"
msgstr "최근 예측"

msgid "Why Choose Our Platform?"
msgstr "왜 우리 플랫폼을 선택해야 할까요?"
'@

# Write content to temporary file
Set-Content -Path $tempPoFile -Value $poContent -Encoding UTF8
Write-Host "Created clean translation file at: $tempPoFile"

# Run msgfmt to compile
Write-Host "Compiling to MO file at: $moFile"
& msgfmt -o $moFile $tempPoFile

# Check result
if ($LASTEXITCODE -eq 0) {
    Write-Host "Success! Korean translation compiled successfully." -ForegroundColor Green
} else {
    Write-Host "Error! Failed to compile translation (Exit code: $LASTEXITCODE)" -ForegroundColor Red
}

# Clean up
Remove-Item -Path $tempPoFile -Force
Write-Host "Temporary files cleaned up."
Write-Host "Done!"
